<!DOCTYPE html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link href="../Styles/MyEBookStylesheet.css" rel="stylesheet" type="text/css" /></head><body>
<h1 id="willkommen">Willkommen</h1>
<p>todo <a href="https://de.wikipedia.org/wiki/JavaScript">https://de.wikipedia.org/wiki/JavaScript</a></p>
<p>Das Arbeiten mit Geodaten und digitalen Landkarten hat durch das 
<a href="https://de.wikipedia.org/w/index.php?title=Global_Positioning_System&amp;oldid=183579881"><strong>g</strong>lobale <strong>P</strong>ositionsbestimmung<strong>s</strong>system GPS</a><sup id="fnref1:1"><a href="#fn%3A1" class="footnote-ref">1</a></sup> 
immer mehr an Relevanz gewonnen. 
Viele Anwendungen bieten heute sogar online geografische Informationen in Echtzeit an. 
So finden Sie auch im Internet immer mehr digitale Karten und Anwendungen 
die mit Geodaten arbeiten.</p>
<blockquote>
<p><a href="https://de.wikipedia.org/w/index.php?title=Geodaten&amp;oldid=181076558">Geodaten</a><sup id="fnref1:2"><a href="#fn%3A2" class="footnote-ref">2</a></sup> 
sind Informationen, die eine Zuordnung zu einer räumlichen Lage besitzen. 
90 % aller Daten können einem Ort zugeordnet werden und sind somit Geodaten.</p>
</blockquote>
<p>Sie lesen dieses Buch sicherlich, weil Sie mit dem Gedanken spielen eine digitale Karte 
anzubieten - höchstwahrscheinlich auf einer Website. Die Grundlagen zu dem, 
was ich in diesem Buch geschrieben habe, finden Sie alle in der 
<a href="https://leafletjs.com/reference">Dokumentation zu Leaflet</a><sup id="fnref1:3"><a href="#fn%3A3" class="footnote-ref">3</a></sup> - oder zu den 
jeweiligen Plugins - öffentlich im Internet. 
Diese Dokumentationen habe ich hier im Buch verlinkt. Warum habe ich trotzdem 
dieses Buch geschrieben?  </p>
<p>Ich habe das Buch geschrieben, 
weil ich manchmal gerne mit Beispielen lerne. Oft komme ich hierbei auf Ideen, 
die trockene Dokumentationen nicht hergeben. Vielleicht geht es Ihnen ja auch 
so und dieses Buch bringt Ihnen einen Mehrwert zu den vorhandenen Dokumentationen. 
Die Quellcode-Dateien zu den im Buch verwendeten Beispielen finden Sie auf der 
Website <a href="https://astrid-guenther.de">https://astrid-guenther.de</a>.</p>
<p>Außerdem finde ich es immer sehr hilfreich, wenn ich ein bisschen über den 
Tellerrand hinaus blicke. Hier im Buch finden Sie ein paar solcher Blicke. 
Wenn es Sie interessiert, können Sie mit mir etwas tiefer in die Welt der 
geografische Koordinaten blicken. Ich erkläre Ihnen auch die unterschiedlichen 
Techniken beim Erstellen der Grafiken für die digitalen Karten. 
Außerdem sehe ich mir mit Ihnen GeoJSON, über die reine Anwendung hinaus, 
etwas genauer an. Ich zeigen Ihnen wie Sie der Karte mit individuellen Markern 
eine persönliche Note geben können. Neben diesen grundlegenden Elementen kommen 
die Visualisierung der Daten mit Heatmaps, Geocoding und Routing nicht zu kurz.</p>
<h2 id="wichtiges-zum-buch">Wichtiges zum Buch</h2>
<p>Ich erkläre Ihnen hier Schritt für Schritt alles das, was ich rund um Leaflet 
als wichtig ansehe – also alles das, was Sie als Entwickler brauchen, um kreativ 
arbeiten zu können.</p>
<p>Ich hoffe, dass Ihnen meine Art zu schreiben gefällt. Ich persönlich hätte mir 
genau dieses Buch zum Start mit Leaflet gewünscht.</p>
<h2 id="was-ist-leaflet">Was ist Leaflet?</h2>
<p><a href="https://leafletjs.com/reference">Leaflet</a> ist eine 
Open Source <a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">JavaScript</a>-Bibliothek<sup id="fnref1:4"><a href="#fn%3A4" class="footnote-ref">4</a></sup>, 
die Ihnen das 
Bereitstellen von Karten auf Ihrer Webseite einfach macht. 
<a href="https://www.bsi-fuer-buerger.de/BSIFB/DE/Empfehlungen/EinrichtungSoftware/OpenSource/OpenSource.html">Open Source</a><sup id="fnref1:5"><a href="#fn%3A5" class="footnote-ref">5</a></sup> 
bedeutet unter anderem, dass der Programmcode einsehbar ist. 
Jeder mit den notwendigen Kenntnissen kann prüfen, wie die Anwendung genau 
funktioniert. Und was noch wichtiger ist: Jeder kann Leaflet verwenden, 
an seine Bedürfnisse anpassen und verbessern.</p>
<p>Was müssen Sie tun, wenn Sie Leaflet auf Ihrer Website einsetzen möchten? 
Im Grunde genommen müssen Sie nur zwei Dateien – eine JavaScript Datei und die 
dazugehörige CSS-Datei einbinden. Wie Sie das genau machen erkläre ich Ihnen 
im Kapitel <a href="../eine-erste-karte/wir-beginnen-mit-einer-einfachen-karte#IntegrierenSiedienotwendigenJavaScriptundCascadingStyleSheet">Integrieren Sie die notwendigen JavaScript und Cascading Style Sheet 
(CSS) Dateien</a> 
ganz genau.</p>
<p>Das Einbinden der Dateien bietet Ihnen den Zugriff auf eine Reihe von Funktionen. Mithilfe dieser Funktionen können sie unkompliziert eine digitale Karte auf Ihrer Website integrieren. Leaflet unterstützt alle modernen Browser – auch die mobilen Versionen. Das bedeute, dass Sie Ihre Karte so ziemlich überall einsetzen können.</p>
<p>Leaflet selbst legt den Schwerpunkt auf die einfache Bedienbarkeit und die Performance. Außerdem ist es den Entwicklern von Leaflet wichtig, dass die JavaScript Bibliothek unkompliziert von anderen Entwicklern mit einem Plugin erweitert werden kann. Die Programmierschnittstelle ist sehr gut dokumentiert. Als Erweiterungsprogrammierer muss man keine Geheimnisse lüften, um Leaflet erfolgreich mit einem Plugin zu erweitern. Dies ist meiner Meinung nach eine der bedeutendsten Stärken von Leaflet.</p>
<p>Viele namhafte Unternehmen setzten Leaflet ein. 
Darunter sind Namen wie </p>
<ul>
<li><a href="https://www.flickr.com">Flickr</a>, </li>
<li><a href="https://github.com/">Github</a>, </li>
<li><a href="https://www.pinterest.com/">Pinterest</a>, </li>
<li><a href="https://www.wikimedia.de/">Wikimedia</a> und </li>
<li><a href="http://www.spiegel.de/">Spiegel</a>.</li>
</ul>
<p>Out-of-the-box können Sie mit Leaflet Marker, Popups, Linien und Formen auf 
unterschiedlichen Ebenen auf Ihrer Karte anzeigen. 
Sie können Zoomen, Entfernungen berechnen und das Zentrum der Karte zu 
bestimmten Koordinaten schieben.</p>
<h2 id="was-sollten-sie-mitbringen">Was sollten Sie mitbringen?</h2>
<p>Ich gehe davon aus, dass Sie über grundlegende <a href="https://de.wikipedia.org/w/index.php?title=HTML5&amp;oldid=182888530">HTML</a><sup id="fnref1:6"><a href="#fn%3A6" class="footnote-ref">6</a></sup> 
und <a href="https://de.wikipedia.org/w/index.php?title=Cascading_Style_Sheets&amp;oldid=181828388">CSS</a><sup id="fnref1:7"><a href="#fn%3A7" class="footnote-ref">7</a></sup> 
Kenntnisse verfügen. 
Sie sollten auf alle Fälle wissen, wie Sie CSS und ein 
<a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">JavaScript</a>-Skript 
in ein HTML-Dokument einbinden und wie Sie mit einfachen HTML-Elementen 
arbeiten. </p>
<blockquote>
<p><a href="http://www.w3.org/Style/CSS/">CSS</a>
ist eine Stylesheet-Sprache für digitale Dokumente. Stylesheet-Sprachen werden
verwendet, um Dokumente und Benutzeroberflächen zu gestalten. Dabei ist ein
Stylesheet mit einer <a href="https://de.wikipedia.org/w/index.php?title=Formatvorlage&amp;oldid=183843814">Formatvorlage</a><sup id="fnref1:8"><a href="#fn%3A8" class="footnote-ref">8</a></sup> zu
vergleichen. Grundidee hierbei ist die Trennung von Dateninhalten und Design.
Zusammen mit HTML und dem <a href="https://wiki.selfhtml.org/index.php?title=JavaScript/DOM&amp;oldid=61063">DOM</a><sup id="fnref1:9"><a href="#fn%3A9" class="footnote-ref">9</a></sup> ist CSS
eines der wichtigsten Elemente im Internet. CSS ist ein so genannter lebendiger 
Standard und wird vom <a href="https://www.w3.org/">W3C</a><sup id="fnref1:10"><a href="#fn%3A10" class="footnote-ref">10</a></sup> und dem <a href="https://whatwg.org/">WHATWG</a><sup id="fnref1:11"><a href="#fn%3A11" class="footnote-ref">11</a></sup> permanent 
weiterentwickelt.  </p>
</blockquote>
<p>. </p>
<blockquote>
<p><a href="https://de.wikipedia.org/w/index.php?title=HTML5&amp;oldid=182888530">HTML</a><sup id="fnref1:12"><a href="#fn%3A12" class="footnote-ref">12</a></sup> 
ist eine textbasierte Auszeichnungssprache zur Strukturierung digitaler 
Dokumente wie Texte mit Hyperlinks, Bildern und anderen Inhalten. HTML-Dokumente 
sind die Grundlage des World Wide Web und werden von Webbrowsern dargestellt.</p>
</blockquote>
<p>Für das Verständnis der Beispiele sind darüber hinaus grundlegende <a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">JavaScript</a><sup id="fnref1:13"><a href="#fn%3A13" class="footnote-ref">13</a></sup> 
Kenntnisse hilfreich. Für die Entwicklung dynamischer Webseiten ist JavaScript unerlässlich. </p>
<blockquote>
<p>Mit <a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">JavaScript</a><sup id="fnref1:14"><a href="#fn%3A14" class="footnote-ref">14</a></sup> 
lassen sich kleine Hilfsroutinen und auch komplexen Bibliotheken schreiben. </p>
</blockquote>
<h2 id="die-autorin">Die Autorin</h2>
<p>Ich habe über 30 Jahre im öffentlichen Dienst gearbeitet. Die meiste Zeit 
als Systemadministratorin in einer Bank.  </p>
<p>In dieser Zeit habe ich nebenberuflich das Abitur nachgeholt und im 
Anschluss ein Studium mit dem Abschluss Master of Computer Science bei der 
Fernuni Hagen abgeschlossen.  </p>
<p>Heute arbeite ich freiberuflich unter anderem mit Leaflet, lebe mit 
meinem Mann, meiner Tochter, meinem Hund und meiner Katze in einem kleinen Dorf 
in der Eifel.  </p>
<p>Fragen zum Buch, konstruktive Kritik, Anregungen und Hinweise auf Tippfehler können 
gerne per E-Mail an die E-Mail-Adresse 
<a href="mailto:info@astrid-guenther.de">info@astrid-guenther.de</a> gesandt werden.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn:1">
<p><a href="https://de.wikipedia.org/w/index.php?title=Global_Positioning_System&amp;oldid=183579881">https://de.wikipedia.org/w/index.php?title=Global_Positioning_System&amp;oldid=183579881</a> (<a href="https://bit.ly/2Rko7MC">https://bit.ly/2Rko7MC</a>) &#160;<a href="#fnref1%3A1" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="https://de.wikipedia.org/w/index.php?title=Geodaten&amp;oldid=181076558">https://de.wikipedia.org/w/index.php?title=Geodaten&amp;oldid=181076558</a> (<a href="https://bit.ly/2RkeBZT">https://bit.ly/2RkeBZT</a>)&#160;<a href="#fnref1%3A2" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="https://leafletjs.com/reference">https://leafletjs.com/reference</a>&#160;<a href="#fnref1%3A3" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:4">
<p><a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070</a> (<a href="https://bit.ly/2Tc84hc">https://bit.ly/2Tc84hc</a>)&#160;<a href="#fnref1%3A4" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:5">
<p><a href="https://www.bsi-fuer-buerger.de/BSIFB/DE/Empfehlungen/EinrichtungSoftware/OpenSource/OpenSource.html">https://www.bsi-fuer-buerger.de/BSIFB/DE/Empfehlungen/EinrichtungSoftware/OpenSource/OpenSource.html</a> (<a href="https://bit.ly/2EWuWNB">https://bit.ly/2EWuWNB</a>)&#160;<a href="#fnref1%3A5" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:6">
<p><a href="https://de.wikipedia.org/w/index.php?title=HTML5&amp;oldid=182888530">https://de.wikipedia.org/w/index.php?title=HTML5&amp;oldid=182888530</a> (<a href="https://bit.ly/2GMpjnY">https://bit.ly/2GMpjnY</a>)&#160;<a href="#fnref1%3A6" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:7">
<p><a href="https://de.wikipedia.org/w/index.php?title=Cascading_Style_Sheets&amp;oldid=181828388">https://de.wikipedia.org/w/index.php?title=Cascading_Style_Sheets&amp;oldid=181828388</a> (<a href="https://bit.ly/2BNqmyh">https://bit.ly/2BNqmyh</a>)&#160;<a href="#fnref1%3A7" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:8">
<p><a href="https://de.wikipedia.org/w/index.php?title=Formatvorlage&amp;oldid=183843814">https://de.wikipedia.org/w/index.php?title=Formatvorlage&amp;oldid=183843814</a> (<a href="https://bit.ly/2BKOul8">https://bit.ly/2BKOul8</a>)&#160;<a href="#fnref1%3A8" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:9">
<p><a href="https://wiki.selfhtml.org/index.php?title=JavaScript/DOM&amp;oldid=61063">https://wiki.selfhtml.org/index.php?title=JavaScript/DOM&amp;oldid=61063</a> (<a href="https://bit.ly/2LJJCkQ">https://bit.ly/2LJJCkQ</a>)&#160;<a href="#fnref1%3A9" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:10">
<p><a href="https://www.w3.org/">https://www.w3.org/</a>&#160;<a href="#fnref1%3A10" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:11">
<p><a href="https://whatwg.org">https://whatwg.org</a>&#160;<a href="#fnref1%3A11" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:12">
<p><a href="https://de.wikipedia.org/w/index.php?title=HTML5&amp;oldid=182888530">https://de.wikipedia.org/w/index.php?title=HTML5&amp;oldid=182888530</a> (<a href="https://bit.ly/2RszPoi">https://bit.ly/2RszPoi</a>)&#160;<a href="#fnref1%3A12" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:13">
<p><a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070</a> (<a href="https://bit.ly/2Tc84hc">https://bit.ly/2Tc84hc</a>)&#160;<a href="#fnref1%3A13" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
<li id="fn:14">
<p><a href="https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070">https://de.wikipedia.org/w/index.php?title=JavaScript_Object_Notation&amp;oldid=183718070</a> (<a href="https://bit.ly/2Tc84hc">https://bit.ly/2Tc84hc</a>)&#160;<a href="#fnref1%3A14" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
</ol>
</div><h1 id="ecmascript-6-gultigkeitsbereiche-von-variablen">ECMAScript 6 - Gültigkeitsbereiche von Variablen</h1>
<p><a href="#" id="GueltigkeitsbereicheVonVariablen"></a></p>
<p><a href="https://de.wikipedia.org/w/index.php?title=JavaScript&amp;oldid=184218223#Versionsgeschichte_von_ECMAScript_(ECMA-262">https://de.wikipedia.org/w/index.php?title=JavaScript&amp;oldid=184218223#Versionsgeschichte_von_ECMAScript_(ECMA-262</a>)  </p>
<h2 id="diesem-kapitel-werden-wir">In diesem Kapitel werden wir …</h2>
<p>Zunächst zeige ich Ihnen, wie Sie </p>
<h2 id="var-deklaration-und-hoisting">var - Deklaration und Hoisting</h2>
<p><a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Statements/var#var_hoisting">https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Statements/var#var_hoisting</a>
todo was ist deklaration</p>
<p>Die Deklartion einer Variablen erfolgt immer </p>
<ul>
<li>im globalen Kontekt falls die Variable außerhalb einer Funktion deklariert wurde oder </li>
<li>ganz am Anfang einer Funktion.  </li>
</ul>
<p>Konkret bedeutet das, dass das Deklarieren einer Variable irgendwo im Programmcode 
das gleiche ist, als würde sie am Anfang deklariert werden. Eine Variable 
kann somit genutzt werden, bevor sie im Programmcode deklariert wurde. 
Dies nennt man <code>hoisting</code>.  </p>
<blockquote>
<p>Exkurs: Der Unterschied zwischen instanziieren, deklarieren und initialisieren<br />
Variable instanzieren:<br />
Der Begriff Instanziierung meint das Erzeugen eines neuen Objekts, 
also einer Instanz, aus einer Klasse.</p>
<pre><code>Objekt value = new Objekt();
// value ist Instanz der Klasse Objekt</code></pre>
<p>Variable deklarieren:<br />
Unter deklarieren einer Variable können Sie sich das erste <em>Erwähnen der Variable</em> 
vorstellen. So weiß der Compiler, dass es die Variable gibt und kann sie ansprechen. 
Der Wert selbst wird bei der Deklaration nicht festgelegt.</p>
<pre><code>int value;
// value als Variable des Typs int deklariert</code></pre>
<p>Variable initialisieren:<br />
Eine Initialisierung ist das erste Zuweisen eines Wertes zu einer Variablen.</p>
<pre><code>value = 0;
// value mit Wert 0 initialisiert</code></pre>
</blockquote>
<p>Sehen wir uns <code>hoisting</code> an einem Beispiel genauer an.</p>
<h3 id="beispiele">Beispiele</h3>
<h4 id="beispiel-1">Beispiel 1</h4>
<p>Sehen Sie sich die nachfolgende Funktion einmal kurz an. </p>
<pre><code>function getValue() {
    if (false) {
        var value = "Prima";
        return value;
    } else {
        return value; // gibt "undefined" oder "" aus, abhängig vom Browser.
    }
}
&lt;!--index_999a.html--&gt;</code></pre>
<p>Wenn Sie noch nicht vertraut mit JavaScript sind, erwarten Sie vielleicht, dass die 
Variable <code>value</code> nur erstellt wird, wenn die Bedingung in der 
<code>if</code>-Anweisung <code>true</code> ist. In der Realtiät ist es aber so, dass die Variable 
auf alle Fälle erstellt wird.</p>
<p>Im Hintergrund verändert JavaScipt den Programmcode nämlich. Der 
<a href="https://de.wikipedia.org/w/index.php?title=Interpreter&amp;oldid=182588640">Interpreter</a> macht 
daraus konkret den folgenden Aufruf. 
Die wesentliche Zeile habe ich mit einem Stern markiert.</p>
<pre><code> function getValue() {
*    var value;
     if (false) {
         var value = "Prima";
         return value;
     } else {
         return value; // gibt "undefined" oder "" aus, abhängig vom Browser.
     }
     // die Variable value existiert auch hier
 }
&lt;!--index_999a.html aus Sicht des Interpeters--&gt;</code></pre>
<p>Die Deklaration der Variablen <code>value</code> wird an den Anfang der Funktion verschoben. 
Und die Initialisierung erfolgt im gleichen Gültigkeitsbereich. Dadurch kann im 
<code>else</code>-Block auf die Variablen <code>value</code> zugegriffen werden. Da die Variablen <code>value</code> im 
<code>else</code>-Block mit keinem Wert belegt ist, gibt sie bei einem Zugriff <code>undefined</code> 
anstelle von <code>ReferenceError: myvalue is not defined</code> aus. </p>
<pre><code> function getValue() {
     if (false) {
         var value = "Prima";
         return value;
     } else {
*        return myvalue; // gibt "ReferenceError: myvalue is not defined" aus
     }
 }
&lt;!--index_999c.html --&gt;</code></pre>
<p><code>Hoisting</code> führt sehr oft zu Missverständnissen. Für viele Entwickler ist es 
befremdend, dass eine Variable nicht an der Stelle erstellt wird, an der sie im 
Programmcode steht. Wahrscheinlich wurde deshalb mit ECMAScript 6 
die Möglichkeit eingeführt, 
Variablen im Gültigkeitsbereich des lokalen Blocks zu deklarieren.</p>
<p><a href="https://www.mediaevent.de/javascript/globale-lokale-variablen.html">https://www.mediaevent.de/javascript/globale-lokale-variablen.html</a></p>
<h2 id="gultigkeitsbereich-scope-im-block">Gültigkeitsbereich (Scope) im Block</h2>
<p>In vielen Programmiersprachen gibt es den Block Scope – alle Variablen, 
die innerhalb eines Blocks deklariert werden, gelten nur innerhalb dieses Blocks. 
Diese Variablen sind lokale Variablen.</p>
<p>Was genau ist ein Block? Ein Block ist entweder </p>
<ul>
<li>der Bereich innerhalb einer Funktion oder</li>
<li>ein Bereich der mit geschweiften Klammern - <code>{</code> und <code>}</code> - umgeben ist. </li>
</ul>
<p>Variablen, die mit <code>let</code> oder <code>const</code> angelegt werden, gelten nur innerhalb 
ihres Blocks. Das klingt unbequem. Es verhindert aber viele schwer 
aufzudeckende Fehler. </p>
<h3 id="block-scope-mit-let">Block Scope mit let</h3>
<p>Mit ECMAScript 6 ist <code>let</code> für die Deklaration von Variablen hinzugekommen. 
Eine mit <code>let</code> deklarierte Variable hat einen eingeschränkten Gültigkeitsbereich. 
Sie ist nur innerhalb des Blocks, in dem sie deklariert wurden, gültig. </p>
<p>Die Deklaration einer Variablen mit <code>let</code> erfolgt auf die gleiche Art 
wie die Deklaration einer Variablen mit <code>var</code>. Was wäre, wenn die Variable im 
vorherigen Beispiel anstelle von var mit let deklariert worden wäre? Genau dies 
zeigt Ihnend das nachfolgende Beispiel.</p>
<pre><code> function getValue() {
     if (true) {
         let value = "Prima";
     } else {
*        return value; // Würde "ReferenceError: value is not defined" ausgeben.
     }
*    return value; // Gibt "ReferenceError: value is not defined" aus.
}
&lt;!--index_998d.html --&gt;</code></pre>
<p>todo innerhalb ist aber möglich</p>
<p>Wenn sie den Programmcode nachvollzogen haben, stimmen Sie sicher mit mir überein, 
das die Ausgabe der Datei <code>998d.html</code> eher den Erwartungen entspricht, als die Ausgabe 
der Datei <code>999a.html</code>. Weil wir die Variable <code>value</code> mit <code>let</code> deklariert haben, 
wird die Deklaration nicht im Hintergrund vom Interpeter an den Anfang der 
Funktion verschoben. Ein Zugriff auf die Variable <code>value</code> ist nun außerhalb 
der <code>if</code>-Anweisung nicht möglich. Da die Variable <code>value</code> nur deklariert wird, 
wenn die Bedingung der <code>if</code>-Anweisung erfüllt ist, kann auch im <code>else</code>-Block 
nicht auf diese zugegriffen werden.</p>
<h3 id="keine-mehrfachverwendung">Keine Mehrfachverwendung</h3>
<p>Die Mehrfachverwendung einer mit <code>let</code> deklarierten 
Variablen innerhalb eines Blocks ist nicht möglich. Falls Sie dies versehentlich 
doch tun, wird der JavaScript Interpreter Ihnen den Fehler 
<code>SyntaxError: redeclaration of let value</code> melden.</p>
<pre><code> function getValue() {
     var value = "Prima";
*    let value = "Prima";  // SyntaxError: redeclaration of let value
 }
&lt;!--index_997.html --&gt;</code></pre>
<p>Im vorhergehenden Beispiel wurde die Variable <code>value</code> zweimal deklariert. Einmal 
mit <code>var</code> und einmal mit <code>let</code>. Weil diese beiden Variablen im selben 
Gültigkeitsbereich deklariert wurden, tritt ein Fehler auf. </p>
<p>Im Umkehrschluss ist es möglich, eine Variable mit dem gleichen Namen in einem 
untergeordneten Gültigkeitsbereich zu deklarieren.</p>
<pre><code> function getValue() {
     var value = "Prima";
     if (true) {
*        let value = "Prima";
     return true;
 }
&lt;!--index_997c.html --&gt;</code></pre>
<p>Im Beispiel der Datei <code>997c.html</code> tritt kein Fehler auf. Die Variable <code>value</code> 
wird in der <code>if</code>-Anweisung neu deklariert. Die Deklaration erfolgt genau 
an der Stelle, an der der Programmierer sie in den Programmcode einfügt. 
Die Deklaration wird also nicht wie 
im Falle von <code>var</code>, an den Beginn des umgebenden Blocks gesetzt. </p>
<h3 id="block-scope-mit-const">Block Scope mit const</h3>
<p>Die Deklaration einer Variablen mit <code>const</code> erstellt eine Konstante. 
Der Gültigkeitsbereich einer mit <code>const</code> deklarierten Variablen ist, 
genau wie bei einer mit <code>let</code> deklarierten Variable, auf den lokalen Block begrenzt. 
Der Wert einer Konstanten muss bei der Deklaration initialisiert werden und 
kann nicht verändert werden.</p>
<pre><code>function getValue() {
    const value1 = "Prima";
    const value2; // SyntaxError: missing = in const declaration
}
&lt;!--index_996.html --&gt;</code></pre>
<p>Im vorherigen Beispiel wird die Variable <code>value1</code> korrekt deklariert und initialisiert. 
Die Deklaration der Variable <code>value2</code> ist nicht möglich. Hier wird ein Fehler 
angezeigt, weil <code>value2</code> beim Anlegen nicht initialisiert wurde.</p>
<h4 id="const-versus-let">const versus let</h4>
<p>Genau wie im Falle von <code>let</code> ist eine mit <code>const</code> deklarierte Variable ausschießlich 
innerhalb eines Blocks gültig. </p>
<pre><code> function getValue() {
     if (true) {
*        const value = "Prima";
     }   
     return value; //ReferenceError: value is not defined
 }
&lt;!--index_995.html --&gt;</code></pre>
<p>Eine weitere Gemeinsamkeit von <code>let</code> und <code>const</code> ist die nicht mögliche 
Mehrfachverwendung.</p>
<pre><code> function getValue() {
     var value1 = "Prima";
     let value2 = "Super";
*    const value1 = "Prima"; // SyntaxError: redeclaration of var value1
*    const value2 = "Super"; // SyntaxError: redeclaration of var value2
     return true;
 }
&lt;!--index_994.html --&gt;</code></pre>
<p>Abgesehen von diesen Gemeinsamkeiten gibt es einen bedeutenden Unterschied. Anders 
als bei einer mit <code>let</code> deklarierten Variablen kann der Wert einer Konstanten 
im Nachhinein nicht geändert werden.</p>
<pre><code> function getValue() {
     let value1 = "Prima";
     const value2 = "Super";
     value1 = "Toll";
*    value2 = "Schön"; // TypeError: invalid assignment to const `value2'
     return true;
 }
&lt;!--index_993.html --&gt;</code></pre>
<p>todo Ausgaben sidn vom Browser abhängig.</p>
<h4 id="const-und-objekte">const und Objekte</h4>
<p>Erklärungsbedürftig ist die Behandlung von Konstanten in JavaScript. Wenn ein 
Objekt als Konstante deklariert wurde, dann ist nur das Objekt selbst konstant. 
Die Eigenschaften des Objektes können verändert werden.</p>
<pre><code>function getValue() {
    const stadt = {
        name: "Koblenz"
    }
    stadt.name = "Bonn"; // Mögliche Neuzuweisung
    stadt.fluss = "Rhein"; // Mögliche Neuzuweisung

    const stadt = { // SyntaxError: redeclaration of const stadt
        name: "Bonn" 
    } 
    return true;
}
&lt;!--index_992.html --&gt;</code></pre>
<h3 id="die-vorubergehend-tote-zone">Die vorübergehend tote Zone</h3>
<p>Variablen, die mit <code>let</code> oder <code>const</code> angelegt werden, gelten nur innerhalb 
ihres Blocks. Dies führt in JavaScript zu einem Zustand der sich gefährlich 
anhört: <em>Der vorübergehend toten Zone</em>. Der englische Ausdruck dafür ist 
<em>Temporal Dead Zone (TDZ)</em>. In der <em>vorübergehend toten Zone</em> tritt beim Zugriff 
auf eine deklarierte Variable, ein Fehler auf. Verhängnisvoll ist, dass 
dieser Fehler auch dann auftritt, wenn eine vermeintlich sichere 
Methode wie <code>typeof</code> verwendet wird.</p>
<pre><code> function getValue() {
     console.log(typeof value1); // Ausgabe: undefined
*    console.log(typeof value2); // ReferenceError: can't access lexical declaration
                                 // `value2' before initialization
     let value2 = "Prima"; 
    return true;
}
&lt;!--index_991.html --&gt;</code></pre>
<p>In vorhergehenden Beispiel wird auf die Variablen <code>value1</code> und 
<code>value2</code> mithilfe von <code>typeof</code> 
zugegriffen. Im Falle von <code>value1</code> ist dies auch kein Problem. Bei <code>value2</code> 
tritt hingegen ein Fehler auf, weil <code>value2</code> im später gleichen 
Gültigkeitsbereich mit <code>let</code> deklariert wird. Die gleiche Deklaration in einem 
anderen Gültigkeitsbereich 
wäre kein Problem.</p>
<blockquote>
<p>Die <em>Temporal Dead Zone (TDZ)</em> wurde in der Spezifikation <em>ECMAScript 6</em> 
nicht explizit erwähnt. Der Begriff wird aber häufig zur Erklärung eingesetzt. Die 
TDZ entsteht, weil der JavaScript Interpreter sich eine Block beim Einlesen vollständig 
ansieht. Wenn er eine mit <code>var</code> deklarierte Variable findet, dann setzt er die 
Deklaration an den Beginn der Funktion oder in den globalen Gültigkeitsbereich. Findet 
der Interpreter eine mit <code>let</code> oder <code>const</code> deklarierte Variable, dann setzt er diese 
in die TDZ - solange, bis die eigenliche Deklaration erfolgt.</p>
</blockquote>
<blockquote>
<p>Die Beispiele zur TDZ verwenden hier mithilfe von <code>let</code> deklarierte Variablen. Das 
Gleiche gilt aber auch für Variablen, die mit <code>const</code> deklariert wurden.</p>
</blockquote>
<pre><code>function getValue() {
     console.log(typeof value); // Ausgabe: undefined
*    if (true) {
*        let value = "Prima";
*        console.log(typeof value); // Ausgabe: String
*    }
     console.log(typeof value); // Ausgabe: undefined
     return true;
 }
&lt;!--index_991a.html --&gt;</code></pre>
<p>Die Variable <code>value2</code> befindet sich nicht in der TDZ wenn der Befehl 
<code>console.log(typeof value)</code> ausgeführt wird. Das bedeutet konkret, dass die Variable 
frei aber tatsächlich <code>undefinded</code> ist.</p>
<h2 id="gultigkeitsbereich-scope-schleifen">Gültigkeitsbereich (Scope) in Schleifen</h2>
<p>Eine weitere Besonderheit von JavaScript ist der Gültigkeitsbereich bei 
Schleifen. Beim Druchlaufen 
von Schleifen bringt es viele Vorteile wenn die Gültikeitesbereiche der Variablen 
übersichtlich und getrennt sind. In einer Schleife wird häufig ein Zähler 
verwendet. Das nächste Beispiel zeigt Ihnen, dass der Gültigkeitsbereich einer 
solchen Zählervariablen nicht übersichtlich und getrennt ist, wenn diese Variable 
mit <code>var</code> deklariert wurde. </p>
<pre><code> function getValue() {
     for (var i = 0; i &lt; 5; i++) {
         // tue etwas ...
     }
*    console.log(i); // Ausgabe: 5
     return true;
 }
&lt;!--index_990.html --&gt;</code></pre>
<p>Auch nachdem der Schleifendurchlauf abgeschlossen ist und der Block verlassen wurde, 
ist die Variable <code>i</code> noch gültig. Der letzte Wert der Variablen wird mittels 
<code>console.log(i)</code> ausgegeben. Dies ist ein Verhalten, das nicht erwünscht ist. Die 
Variable <code>i</code> wird in der Regel nur lokal in der Schleife benötigt und sollte auch 
nur hier ihren Gültigkeitsbereich haben. Bei der Verwendung von <code>var</code> zur Deklaration 
wird diese Deklaration aufgrund von 
<a href="https://de.wikipedia.org/w/index.php?title=Hoisting&amp;oldid=166784898">Hoisting</a> 
nach oben geschoben.</p>
<p>Das nächste Beispiel nutzt anstelle von <code>var</code> eine mit <code>let</code> deklarierte Variabel als 
Zähler. Das Ergebnis ist das erwartete Verhalten.</p>
<pre><code> function getValue() {
     for (let i = 0; i &lt; 5; i++) {
         console.log(i); // Ausgabe: 0 1 2 3 4
     }
*    console.log(i); // ReferenceError: i is not defined
     return true;
 }
&lt;!--index_989.html --&gt;</code></pre>
<p>Das Beispiel der Datei <code>index_989.html</code> demonstriert das gewünschte Verhalten. Die 
Variable <code>i</code> existiert nur innerhalb der Schleife. Nachdem die Schleife abgearbeitet 
ist, kann auf die Variable <code>i</code> nicht mehr zugegriffen werden. Die Variable <code>i</code> kann<br />
keine Verwirrung mehr stiften.</p>
<h3 id="funktionen-schleifen">Funktionen in Schleifen</h3>
<p>Hoisting und das Verhalten von <code>var</code> machend das Arbeiten mit Funktionen in Schleifen 
problematisch. Das nächste Beispiel zeigt Ihnen, was ich genau meine.</p>
<pre><code>function getValue() {
    var funktionen = [];
    for (var i = 0; i &lt; 5; i++) {
        funktionen.push(function() {
            console.log(i);
        });
    }
    funktionen.forEach(function(funktion){
        funktion(); // Ausgabe: Fünfmal die Nummer "5"
    });
    return true;
}
&lt;!--index_988.html --&gt;</code></pre>
<p>Sicherlich haben Sie die Ausgabe <code>0 1 2 3 4</code> erwartet. Anstelle davon wurde aber
<code>5 5 5 5 5</code> ausgegeben. Der Grund hierfür ist, dass dieselbe Variable <code>i</code> über alle 
Iterationen der Schleife hinweg geteilt wird. Aufgrund von Hoisting wurde 
die Variable <code>i</code> außerhalb der Schleife deklariert. Alle Funktionen, die in der 
Schleife erstellt wurden, halten eine Referenz auf die selbe Variable <code>i</code>. 
Diese Variable <code>i</code> hat den Wert <code>5</code>, wenn alle Schleifendurchläufe beendet sind. 
Wenn <code>console.log(i)</code> aufgrund von </p>
<pre><code>funktionen.forEach(function(funktion){
    funktion(); 
});</code></pre>
<p>fünfmal ausgeführt wird, wird Wert <code>5</code> fünfmal ausgegeben.  </p>
<p>Eine Lösung für dieses Problem ist <em>IIFE</em>. <em>IIFE</em> steht für <em>Immediately-invoked Function Expression</em>, 
also ein sofort ausgeführter Funktionsausdruck. Das hört sich sehr kompliziert an. Meiner Meinung nach 
ist es auch kompliziert. Ich habe <em>IIFE</em> hier nur der Vollständigkeithalber aufgenommen. 
Im nächsten Kapitel findes Sie ein einfachere Lösung.  </p>
<pre><code>function getValue() {
    var funktionen = [];
    for (var i = 0; i &lt; 5; i++) {
        funktionen.push((function(value) {
            return function (){
                console.log(value);
            }
        }(i)));
    }
    funktionen.forEach(function(funktion){
        funktion(); // Ausgabe: 0 1 2 3 4 
    });
    return true;
}
&lt;!--index_987.html --&gt;</code></pre>
<p>Das Beispiel der Datei <code>index_987.html</code> verwendet eine IIFE.</p>
<h3 id="let-schleifen">let in Schleifen</h3>
<pre><code> function getValue() {
     var funktionen = [];
*    for (var i = 0; i &lt; 5; i++) {
         funktionen.push(function() {
             console.log(i);
         });
     }
     funktionen.forEach(function(funktion){
         funktion(); // Ausgabe: 0 1 2 3 4
     });
     return true;
 }
&lt;!--index_986.html --&gt;</code></pre>
<p>Das Beispiel der Datei <code>index_986.html</code> tut genau das, was das Beispiel 
der Datei <code>index_987.html</code> tat.</p>
<p>Mit dem Beispiel der Datei <code>index_985.html</code> können Sie sich davon überzeugen, dass das 
was gerade für eine forEach Schleife beschrieben habe auch für for in und for of Schleifen.</p>
<p>&lt;!--index_985.html --&gt;
&lt;!--index_985a.html --&gt;</p>
<h3 id="const-schleifen">const in Schleifen</h3>
<h2 id="globaler-gultigkeitsbereich-scope">Globaler Gültigkeitsbereich (Scope)</h2>
<h2 id="erfolgsmethode-best-practice">Erfolgsmethode - best practice</h2>
<blockquote>
<p><strong>Achtung:</strong></p>
</blockquote>
<h2 id="diesem-kapitel-haben-wir">In diesem Kapitel haben wir ...</h2>
<p>In diesem Kapitel haben Sie auf unterschiedliche Arten eine Karte erstellt. </p>
<p>In den nächsten Kapiteln werden wir diese Karte mit Elementen und Informationen füllen.</p>
<div class="footnotes">
<hr />
<ol>
</ol>
</div><h1 id="auf-wiedersehen">Auf Wiedersehen</h1>
<p>Ich hoffe, dass Ihnen der Rundgang durch LeafletJs gefallen hat und Sie jede 
Menge für sich mitnehmen konnten.</p></html>